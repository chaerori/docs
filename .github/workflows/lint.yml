# .github/workflows/lint.yml
name: Docs CI
on:
  pull_request:
    paths:
      - 'docs/**'
      - 'i18n/**'
      - 'docusaurus.config.js'
      - 'sidebars.js'
  push:
    branches: [ main ]
    paths:
      - 'docs/**'
      - 'i18n/**'
      - 'docusaurus.config.js'
      - 'sidebars.js'

jobs:
  build-and-validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20, cache: npm }
      - run: npm ci
      - run: npm run build    # onBrokenLinks=throw로 깨진 링크 잡힘

      # 선택: 마크다운/맞춤법/외부 링크 체크
      - run: npx markdownlint-cli2 "docs/**/*.md{,x}" || true
      - run: npx cspell "docs/**/*.*" || true
      - run: npx lychee --no-progress --verbose docs || true