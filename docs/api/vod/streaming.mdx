---
title: 스트리밍
description: 비디오 스트리밍 URL 생성 및 재생 방법을 설명합니다.
---

# 스트리밍

업로드된 비디오의 스트리밍 URL을 생성하고 재생하는 방법을 알아보겠습니다.

## 스트리밍 URL 생성

### 기본 스트리밍 URL

```http
POST /v1/videos/{video_id}/stream
```

**요청 예시:**
```json
{
  "quality": "auto",
  "expires_in": 3600,
  "drm_enabled": false
}
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "stream_url": "https://stream.kollus.com/v1/videos/video_123/stream",
    "expires_at": "2024-01-01T13:00:00Z",
    "quality_options": [
      {
        "quality": "1080p",
        "url": "https://stream.kollus.com/v1/videos/video_123/stream?quality=1080p"
      },
      {
        "quality": "720p",
        "url": "https://stream.kollus.com/v1/videos/video_123/stream?quality=720p"
      }
    ]
  }
}
```

## 품질 옵션

| 품질 | 해상도 | 비트레이트 | 설명 |
|------|--------|------------|------|
| 4K | 3840x2160 | 15-25 Mbps | 최고 품질 |
| 1080p | 1920x1080 | 5-8 Mbps | 고품질 |
| 720p | 1280x720 | 2-4 Mbps | 중품질 |
| 480p | 854x480 | 1-2 Mbps | 저품질 |
| 360p | 640x360 | 0.5-1 Mbps | 최저 품질 |

## DRM 보호

### DRM 설정

```json
{
  "drm_enabled": true,
  "drm_type": "widevine",
  "license_server_url": "https://license.kollus.com/v1/license",
  "content_key": "encrypted_content_key"
}
```

### DRM 라이선스 요청

```javascript
const requestDRMLicense = async (streamUrl, keyId) => {
  const response = await fetch('/api/v1/drm/license', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      stream_url: streamUrl,
      key_id: keyId,
      user_id: 'user_123'
    })
  });
  
  return response.json();
};
```

## 적응형 스트리밍 (HLS)

### HLS URL 생성

```http
POST /v1/videos/{video_id}/hls
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "master_playlist_url": "https://stream.kollus.com/v1/videos/video_123/master.m3u8",
    "variants": [
      {
        "bandwidth": 5000000,
        "resolution": "1920x1080",
        "playlist_url": "https://stream.kollus.com/v1/videos/video_123/1080p.m3u8"
      },
      {
        "bandwidth": 2500000,
        "resolution": "1280x720",
        "playlist_url": "https://stream.kollus.com/v1/videos/video_123/720p.m3u8"
      }
    ]
  }
}
```

## 재생 통계

### 재생 이벤트 전송

```javascript
const trackPlayback = (videoId, event) => {
  fetch('/api/v1/analytics/playback', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      video_id: videoId,
      event: event, // 'play', 'pause', 'seek', 'complete'
      timestamp: new Date().toISOString(),
      position: currentTime,
      quality: currentQuality
    })
  });
};
```

### 통계 조회

```http
GET /v1/videos/{video_id}/analytics
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "total_views": 1250,
    "unique_viewers": 890,
    "average_watch_time": 180,
    "completion_rate": 0.75,
    "quality_distribution": {
      "1080p": 0.4,
      "720p": 0.5,
      "480p": 0.1
    }
  }
}
```

## 플레이어 통합

### HTML5 비디오 플레이어

```html
<video id="videoPlayer" controls width="100%" height="400">
  <source src="STREAM_URL" type="application/x-mpegURL">
  <source src="STREAM_URL" type="video/mp4">
  브라우저가 비디오를 지원하지 않습니다.
</video>

<script>
const player = document.getElementById('videoPlayer');
const streamUrl = 'YOUR_STREAM_URL';

player.addEventListener('loadstart', () => {
  trackPlayback('video_123', 'load');
});

player.addEventListener('play', () => {
  trackPlayback('video_123', 'play');
});

player.addEventListener('pause', () => {
  trackPlayback('video_123', 'pause');
});
</script>
```

### Video.js 플레이어

```javascript
import videojs from 'video.js';

const player = videojs('videoPlayer', {
  controls: true,
  responsive: true,
  fluid: true,
  sources: [{
    src: 'YOUR_HLS_URL',
    type: 'application/x-mpegURL'
  }]
});

player.ready(() => {
  player.src({
    src: 'YOUR_HLS_URL',
    type: 'application/x-mpegURL'
  });
});
```

## 다음 단계

- [비디오 관리](/api/vod/management) - 업로드된 비디오 관리
- [Kollus Live API](/api/live) - 라이브 스트리밍 API
