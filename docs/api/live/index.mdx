---
title: Kollus Live API
description: Kollus Live API 레퍼런스 문서입니다.
---

# Kollus Live API

Kollus Live API를 사용하여 실시간 라이브 스트리밍 서비스를 구현할 수 있습니다.

## 개요

Kollus Live API는 다음과 같은 기능을 제공합니다:

- 라이브 스트림 생성 및 관리
- 실시간 인코딩 및 전송
- 시청자 관리 및 채팅
- 녹화 및 VOD 변환
- 다중 해상도 지원

## 인증

모든 API 요청에는 API 키가 필요합니다.

```bash
curl -H "Authorization: Bearer YOUR_API_KEY" \
     https://api.kollus.com/v1/live/streams
```

## 기본 엔드포인트

### 라이브 스트림 생성

```http
POST /v1/live/streams
```

**요청 예시:**
```json
{
  "title": "라이브 스트림 제목",
  "description": "스트림 설명",
  "category": "교육",
  "is_public": true,
  "recording_enabled": true,
  "chat_enabled": true,
  "max_viewers": 1000
}
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "stream_id": "stream_123",
    "rtmp_url": "rtmp://live.kollus.com/live/stream_123",
    "stream_key": "abc123def456",
    "hls_url": "https://live.kollus.com/hls/stream_123.m3u8",
    "web_rtc_url": "https://live.kollus.com/webrtc/stream_123",
    "status": "ready"
  }
}
```

### 스트림 상태 조회

```http
GET /v1/live/streams/{stream_id}
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "stream_id": "stream_123",
    "title": "라이브 스트림 제목",
    "status": "live",
    "viewer_count": 45,
    "started_at": "2024-01-01T10:00:00Z",
    "duration": 1800,
    "quality": "1080p"
  }
}
```

## 스트리밍 설정

### 인코딩 설정

```json
{
  "video": {
    "codec": "h264",
    "bitrate": 5000000,
    "resolution": "1920x1080",
    "framerate": 30
  },
  "audio": {
    "codec": "aac",
    "bitrate": 128000,
    "sample_rate": 44100,
    "channels": 2
  }
}
```

### 다중 해상도 설정

```json
{
  "variants": [
    {
      "name": "1080p",
      "resolution": "1920x1080",
      "bitrate": 5000000
    },
    {
      "name": "720p",
      "resolution": "1280x720",
      "bitrate": 2500000
    },
    {
      "name": "480p",
      "resolution": "854x480",
      "bitrate": 1000000
    }
  ]
}
```

## 시청자 관리

### 시청자 목록 조회

```http
GET /v1/live/streams/{stream_id}/viewers
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "viewers": [
      {
        "user_id": "user_123",
        "username": "viewer1",
        "joined_at": "2024-01-01T10:05:00Z",
        "watch_time": 300
      }
    ],
    "total_count": 45
  }
}
```

### 시청자 차단/해제

```http
POST /v1/live/streams/{stream_id}/viewers/{user_id}/block
DELETE /v1/live/streams/{stream_id}/viewers/{user_id}/block
```

## 채팅 기능

### 채팅 메시지 전송

```http
POST /v1/live/streams/{stream_id}/chat
```

**요청 예시:**
```json
{
  "message": "안녕하세요!",
  "user_id": "user_123",
  "username": "viewer1"
}
```

### 채팅 메시지 조회

```http
GET /v1/live/streams/{stream_id}/chat
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "messages": [
      {
        "id": "msg_123",
        "message": "안녕하세요!",
        "user_id": "user_123",
        "username": "viewer1",
        "timestamp": "2024-01-01T10:05:00Z"
      }
    ]
  }
}
```

## 녹화 기능

### 녹화 시작/중지

```http
POST /v1/live/streams/{stream_id}/recording/start
POST /v1/live/streams/{stream_id}/recording/stop
```

### 녹화 파일 조회

```http
GET /v1/live/streams/{stream_id}/recordings
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "recordings": [
      {
        "recording_id": "rec_123",
        "file_url": "https://recordings.kollus.com/rec_123.mp4",
        "duration": 3600,
        "file_size": 1073741824,
        "created_at": "2024-01-01T10:00:00Z"
      }
    ]
  }
}
```

## WebRTC 스트리밍

### WebRTC 연결 설정

```javascript
const startWebRTC = async (streamId) => {
  const peerConnection = new RTCPeerConnection({
    iceServers: [
      { urls: 'stun:stun.kollus.com:3478' }
    ]
  });
  
  const stream = await navigator.mediaDevices.getUserMedia({
    video: true,
    audio: true
  });
  
  stream.getTracks().forEach(track => {
    peerConnection.addTrack(track, stream);
  });
  
  const offer = await peerConnection.createOffer();
  await peerConnection.setLocalDescription(offer);
  
  const response = await fetch(`/api/v1/live/streams/${streamId}/webrtc/offer`, {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ offer })
  });
  
  const { answer } = await response.json();
  await peerConnection.setRemoteDescription(answer);
};
```

## 에러 코드

| 코드 | 설명 |
|------|------|
| 400 | 잘못된 요청 |
| 401 | 인증 실패 |
| 403 | 권한 없음 |
| 404 | 스트림 없음 |
| 409 | 스트림 충돌 |
| 500 | 서버 오류 |

## 다음 단계

- [Kollus VOD API](/api/vod) - 비디오 온 디맨드 API
- [개발 가이드](/dev-guide) - 개발 시작하기
