---
title: 라이브 스트리밍
description: 라이브 스트리밍 설정 및 관리 방법을 설명합니다.
---

# 라이브 스트리밍

라이브 스트리밍을 설정하고 관리하는 방법을 알아보겠습니다.

## 스트림 생성

### 기본 스트림 생성

```bash
curl -X POST \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "라이브 스트림",
    "description": "스트림 설명",
    "category": "교육",
    "is_public": true
  }' \
  https://api.kollus.com/v1/live/streams
```

### 고급 설정

```json
{
  "title": "고급 라이브 스트림",
  "description": "고급 설정이 적용된 스트림",
  "category": "교육",
  "is_public": false,
  "password": "stream_password",
  "max_viewers": 500,
  "recording_enabled": true,
  "chat_enabled": true,
  "moderation_enabled": true,
  "quality_preset": "high",
  "latency_mode": "low"
}
```

## 인코딩 설정

### 비디오 설정

```json
{
  "video": {
    "codec": "h264",
    "profile": "high",
    "level": "4.1",
    "bitrate": 5000000,
    "max_bitrate": 8000000,
    "resolution": "1920x1080",
    "framerate": 30,
    "keyframe_interval": 2,
    "b_frames": 2
  }
}
```

### 오디오 설정

```json
{
  "audio": {
    "codec": "aac",
    "bitrate": 128000,
    "sample_rate": 44100,
    "channels": 2,
    "profile": "aac_low"
  }
}
```

## 다중 해상도 설정

### 적응형 스트리밍

```json
{
  "adaptive_streaming": {
    "enabled": true,
    "variants": [
      {
        "name": "1080p",
        "resolution": "1920x1080",
        "bitrate": 5000000,
        "framerate": 30
      },
      {
        "name": "720p",
        "resolution": "1280x720",
        "bitrate": 2500000,
        "framerate": 30
      },
      {
        "name": "480p",
        "resolution": "854x480",
        "bitrate": 1000000,
        "framerate": 24
      }
    ]
  }
}
```

## RTMP 스트리밍

### OBS Studio 설정

1. **스트림 설정**
   - 서비스: Custom
   - 서버: `rtmp://live.kollus.com/live`
   - 스트림 키: `YOUR_STREAM_KEY`

2. **출력 설정**
   - 인코더: x264
   - 비트레이트: 5000 kbps
   - 해상도: 1920x1080
   - 프레임레이트: 30 fps

### FFmpeg 설정

```bash
ffmpeg -i input.mp4 \
  -c:v libx264 \
  -preset fast \
  -crf 23 \
  -maxrate 5000k \
  -bufsize 10000k \
  -c:a aac \
  -b:a 128k \
  -f flv \
  rtmp://live.kollus.com/live/YOUR_STREAM_KEY
```

## WebRTC 스트리밍

### 브라우저 설정

```javascript
const startWebRTCStream = async () => {
  const stream = await navigator.mediaDevices.getUserMedia({
    video: {
      width: 1920,
      height: 1080,
      frameRate: 30
    },
    audio: {
      sampleRate: 44100,
      channelCount: 2
    }
  });
  
  const peerConnection = new RTCPeerConnection({
    iceServers: [
      { urls: 'stun:stun.kollus.com:3478' },
      { urls: 'turn:turn.kollus.com:3478', username: 'user', credential: 'pass' }
    ]
  });
  
  stream.getTracks().forEach(track => {
    peerConnection.addTrack(track, stream);
  });
  
  return { stream, peerConnection };
};
```

## 스트림 모니터링

### 실시간 통계

```http
GET /v1/live/streams/{stream_id}/stats
```

**응답 예시:**
```json
{
  "status": "success",
  "data": {
    "stream_id": "stream_123",
    "status": "live",
    "viewer_count": 45,
    "peak_viewers": 120,
    "total_views": 500,
    "bitrate": 4500000,
    "framerate": 29.8,
    "dropped_frames": 2,
    "uptime": 1800
  }
}
```

### 품질 메트릭

```json
{
  "quality_metrics": {
    "video_quality": "excellent",
    "audio_quality": "good",
    "latency": 2.5,
    "packet_loss": 0.1,
    "jitter": 0.05
  }
}
```

## 시청자 관리

### 시청자 제한

```json
{
  "viewer_limits": {
    "max_viewers": 1000,
    "geo_restrictions": {
      "allowed_countries": ["KR", "US", "JP"],
      "blocked_countries": ["CN", "RU"]
    },
    "ip_whitelist": ["192.168.1.0/24"],
    "ip_blacklist": ["10.0.0.1"]
  }
}
```

### 시청자 인증

```javascript
const authenticateViewer = async (streamId, token) => {
  const response = await fetch(`/api/v1/live/streams/${streamId}/auth`, {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ token })
  });
  
  return response.json();
};
```

## 채팅 시스템

### 채팅 설정

```json
{
  "chat_settings": {
    "enabled": true,
    "moderation": true,
    "max_message_length": 200,
    "rate_limit": {
      "messages_per_minute": 10,
      "burst_limit": 5
    },
    "filters": {
      "profanity_filter": true,
      "spam_detection": true
    }
  }
}
```

### 채팅 이벤트

```javascript
const chatSocket = new WebSocket('wss://live.kollus.com/chat/stream_123');

chatSocket.onmessage = (event) => {
  const data = JSON.parse(event.data);
  
  switch (data.type) {
    case 'message':
      displayMessage(data.message);
      break;
    case 'user_joined':
      showUserJoined(data.user);
      break;
    case 'user_left':
      showUserLeft(data.user);
      break;
  }
};

const sendMessage = (message) => {
  chatSocket.send(JSON.stringify({
    type: 'message',
    content: message,
    user_id: 'user_123'
  }));
};
```

## 다음 단계

- [녹화 및 VOD 변환](/api/live/recording) - 라이브 스트림 녹화
- [Kollus VOD API](/api/vod) - 비디오 온 디맨드 API
